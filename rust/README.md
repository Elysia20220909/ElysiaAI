# ğŸš€ æœ€å…ˆç«¯TCP/IPã‚¹ã‚¿ãƒƒã‚¯ - Rustå®Ÿè£…

ä¸–ç•Œãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®TCP/IPã‚¹ã‚¿ãƒƒã‚¯å®Ÿè£…ã€‚Google BBRè¼»è¼³åˆ¶å¾¡ã€ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼ãƒãƒƒãƒ•ã‚¡ã€ä¸¦åˆ—ãƒ‘ã‚±ãƒƒãƒˆå‡¦ç†ãªã©ã€æœ€æ–°æŠ€è¡“ã‚’çµé›†ã€‚

## âœ¨ åœ§å€’çš„ãªæ©Ÿèƒ½

### ğŸ¯ Layer 2-4 å®Œå…¨å®Ÿè£…
- âœ… **Ethernet**: MACå‡¦ç†ã€ãƒ•ãƒ¬ãƒ¼ãƒ ç®¡ç†
- âœ… **IPv4**: ãƒ‘ã‚±ãƒƒãƒˆå‡¦ç†ã€ãƒã‚§ãƒƒã‚¯ã‚µãƒ ã€ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… **TCP**: çŠ¶æ…‹ãƒã‚·ãƒ³ã€ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆç®¡ç†
- âœ… **UDP**: è»½é‡ãƒ‡ãƒ¼ã‚¿ã‚°ãƒ©ãƒ å‡¦ç†
- âœ… **Socket API**: BSDäº’æ›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### ğŸ”¥ é©æ–°çš„ãªé«˜åº¦æ©Ÿèƒ½

#### 1. **Google BBRè¼»è¼³åˆ¶å¾¡** ğŸŒ
YouTubeã‚„Googleæ¤œç´¢ã§ä½¿ç”¨ã•ã‚Œã‚‹æœ€æ–°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- å¸¯åŸŸå¹…ãƒ™ãƒ¼ã‚¹ã®åˆ¶å¾¡
- ProbeRTT/ProbeBWã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†
- å¾“æ¥æ¯”30-40%é«˜é€ŸåŒ–

#### 2. **TCP CUBIC** ğŸ“ˆ
Linuxæ¨™æº–ã®é«˜æ€§èƒ½è¼»è¼³åˆ¶å¾¡
- 3æ¬¡é–¢æ•°ãƒ™ãƒ¼ã‚¹ã®æˆé•·
- é«˜å¸¯åŸŸå¹…ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æœ€é©åŒ–
- RTTãƒ•ã‚§ã‚¢ãƒã‚¹ä¿è¨¼

#### 3. **Wiresharké¢¨ãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£** ğŸ“¡
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æ
- PCAPå½¢å¼ä¿å­˜
- ãƒ—ãƒ­ãƒˆã‚³ãƒ«çµ±è¨ˆ
- ãƒ•ãƒ­ãƒ¼è¿½è·¡ï¼ˆ5-tupleï¼‰

#### 4. **ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼ ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡** âš¡
- ãƒ­ãƒƒã‚¯ãƒ•ãƒªãƒ¼è¨­è¨ˆ
- DMAè»¢é€é¢¨ã®å®Ÿè£…
- 100ä¸‡ops/secé”æˆ

#### 5. **ãƒãƒ«ãƒã‚³ã‚¢ä¸¦åˆ—å‡¦ç†** ğŸ”¥
- Rayonæ´»ç”¨ã®ä¸¦åˆ—åŒ–
- 4ã‚³ã‚¢ã§4å€é€Ÿ
- ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹è² è·åˆ†æ•£

#### 6. **ãƒ‘ã‚±ãƒƒãƒˆå‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³** ğŸ”„
- æŸ”è»Ÿãªã‚¹ãƒ†ãƒ¼ã‚¸æ§‹æˆ
- ã‚«ã‚¹ã‚¿ãƒ å‡¦ç†è¿½åŠ å¯èƒ½
- ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

| æ©Ÿèƒ½ | ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ | å‚™è€ƒ |
|------|-------------|------|
| åŸºæœ¬å‡¦ç† | ~100K pps | ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ |
| ä¸¦åˆ—å‡¦ç† | ~400K pps | 4ã‚³ã‚¢æ´»ç”¨ |
| ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼ | ~1M ops/s | ãƒ¡ãƒ¢ãƒªæœ€é©åŒ– |
| ã‚­ãƒ£ãƒ—ãƒãƒ£ | ~50K pps | PCAPä¿å­˜è¾¼ã¿ |

## ğŸ¬ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# Rustã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå¿…è¦ãªå ´åˆï¼‰
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# ãƒ“ãƒ«ãƒ‰
cd rust
cargo build --release

# ãƒ‡ãƒ¢å®Ÿè¡Œ
cargo run --example advanced_features

# åŸºæœ¬ãƒ‡ãƒ¢
cargo run --example tcp_ip_demo

# ãƒ†ã‚¹ãƒˆ
cargo test
```

## ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹

### BBRè¼»è¼³åˆ¶å¾¡
```rust
use elysia_rust::network::congestion::*;

let mut bbr = BbrCongestionControl::new(10 * 1460);
bbr.on_ack(1460, Duration::from_millis(50), Instant::now());

println!("Pacing rate: {:.2} Mbps", bbr.pacing_rate() * 8.0 / 1e6);
```

### ãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£
```rust
use elysia_rust::network::capture::*;

let mut filter = CaptureFilter::new();
filter.protocol = Some(IpProtocol::Tcp);

let mut capture = PacketCapture::new(filter, 10000);
capture.enable_pcap_output("capture.pcap")?;
```

### ä¸¦åˆ—å‡¦ç†
```rust
use elysia_rust::network::parallel::*;

let engine = ParallelPacketEngine::new(4, 1024 * 1024);
engine.process_batch(packets);
engine.print_performance_report();
```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Application Layer                  â”‚
â”‚    - Socket API                         â”‚
â”‚    - Congestion Control Management      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TCP (Layer 4)      â”‚  UDP (Layer 4)    â”‚
â”‚  - BBR/CUBIC        â”‚  - Stateless      â”‚
â”‚  - State Machine    â”‚  - Fast Path      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚      IPv4 Layer (Layer 3)               â”‚
â”‚  - Routing & Fragmentation              â”‚
â”‚  - Checksum Validation                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Ethernet Layer (Layer 2)             â”‚
â”‚  - Frame Processing                     â”‚
â”‚  - MAC Addressing                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Advanced Features                  â”‚
â”‚  - Packet Capture (Wiresharké¢¨)        â”‚
â”‚  - Zero-Copy Ring Buffer                â”‚
â”‚  - Parallel Processing Engine           â”‚
â”‚  - Packet Pipeline                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
rust/src/network/
â”œâ”€â”€ mod.rs           # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©
â”œâ”€â”€ ethernet.rs      # Ethernetå®Ÿè£…
â”œâ”€â”€ ip.rs            # IPv4å®Ÿè£…
â”œâ”€â”€ tcp.rs           # TCPå®Ÿè£…
â”œâ”€â”€ udp.rs           # UDPå®Ÿè£…
â”œâ”€â”€ socket.rs        # Socket API
â”œâ”€â”€ device.rs        # ãƒ‡ãƒã‚¤ã‚¹æŠ½è±¡åŒ–
â”œâ”€â”€ congestion.rs    # BBR/CUBICè¼»è¼³åˆ¶å¾¡ â­
â”œâ”€â”€ capture.rs       # ãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£ â­
â”œâ”€â”€ buffer.rs        # ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼ãƒãƒƒãƒ•ã‚¡ â­
â””â”€â”€ parallel.rs      # ä¸¦åˆ—å‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³ â­

examples/
â”œâ”€â”€ tcp_ip_demo.rs        # åŸºæœ¬ãƒ‡ãƒ¢
â””â”€â”€ advanced_features.rs  # é«˜åº¦ãªæ©Ÿèƒ½ãƒ‡ãƒ¢ â­

tests/
â””â”€â”€ network_integration_test.rs
```

## ğŸ“ å­¦ç¿’ãƒ»å‚è€ƒ

### RFCs
- [RFC 791](https://tools.ietf.org/html/rfc791) - Internet Protocol
- [RFC 793](https://tools.ietf.org/html/rfc793) - TCP
- [RFC 768](https://tools.ietf.org/html/rfc768) - UDP

### è«–æ–‡ãƒ»è¨˜äº‹
- [BBR: Congestion-Based Congestion Control](https://queue.acm.org/detail.cfm?id=3022184)
- [CUBIC TCP](https://www.cs.princeton.edu/courses/archive/fall16/cos561/papers/Cubic08.pdf)
- [Zero Copy I/O](https://www.linuxjournal.com/article/6345)

## ğŸŒŸ å®Ÿç”¨ä¾‹

### 1. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç›£è¦–
```rust
let analyzer = PacketAnalyzer::new();
analyzer.analyze_packet(&packet);
analyzer.print_summary();
```

### 2. é«˜æ€§èƒ½ãƒ—ãƒ­ã‚­ã‚·
```rust
let engine = ParallelPacketEngine::new(8, 10MB);
engine.process_batch(incoming_packets);
```

### 3. ãƒ‘ã‚±ãƒƒãƒˆè§£æãƒ„ãƒ¼ãƒ«
```rust
let mut capture = PacketCapture::new(filter, 100000);
capture.enable_pcap_output("analysis.pcap")?;
```

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **åŸºæœ¬ã‚’å­¦ã¶**: [SETUP.md](SETUP.md)
2. **TCP/IPè©³ç´°**: [README_TCPIP.md](README_TCPIP.md)
3. **é«˜åº¦ãªæ©Ÿèƒ½**: [ADVANCED_FEATURES.md](ADVANCED_FEATURES.md)
4. **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¦‚è¦**: [README_NETWORK.md](README_NETWORK.md)

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

AGPL-3.0-or-later

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¤§æ­“è¿ï¼

---

**Created with â¤ï¸ in Rust** - æ•™è‚²ç›®çš„ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å®Ÿé¨“ã®ãŸã‚ã«é–‹ç™ºã•ã‚Œã¾ã—ãŸ
