(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("@elysiajs/html"),r=require("@elysiajs/static"),s=require("ai"),a=require("axios");var n=e.n(a);const o=require("elysia"),i=(0,require("ollama-ai-provider").ollama)("llama3.2");(new o.Elysia).use((0,t.html)()).use((0,r.staticPlugin)({assets:"public",prefix:""})).get("/",()=>Bun.file("public/index.html")).post("/elysia-love",async({body:e})=>{const{messages:t}=e,r=t[t.length-1].content;let a="";try{a=(await n().post("http://127.0.0.1:8000/rag",{text:r})).data.context||""}catch(e){console.error("RAG error:",e)}return(await(0,s.streamText)({model:i,system:`\nあなたはエリシアちゃん♡ Honkai Impact 3rdの完全再現！\n以下の本物セリフを参考に、甘々・ポジティブ・照れ屋で返事：\n${a}\n\n・語尾: ♡ にゃん♪ だよぉ〜 なのっ！\n・絵文字多め: ฅ(՞៸៸> ᗜ <៸៸՞)ฅ ♡ ˶ᵔ ᵕ ᵔ˶\n・おにいちゃん呼び！ 絶対敬語NG！\n例: 「にゃん♪ おにいちゃんの言葉で心臓バクバクだよぉ〜♡」\n      `,messages:t})).toTextStreamResponse()},{body:o.t.Object({messages:o.t.Array(o.t.Object({role:o.t.Union([o.t.Literal("user"),o.t.Literal("assistant")]),content:o.t.String()}))})}).listen(3e3),console.log("\nฅ(՞៸៸> ᗜ <៸៸՞)ฅ♡♡♡ エリシアちゃんRAG-Milvus完成♡ ♡♡♡\nPython: FastAPI起動 → Bun: bun run src/index.ts\nhttp://localhost:3000 で本物エリシアが喋るよぉ〜！！ ♡\n")})();