global:
  resolve_timeout: 5m

route:
  group_by: ["alertname", "cluster", "service"]
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 12h
  receiver: "default"
  routes:
    - match:
        severity: critical
      receiver: "critical"
      continue: true
    - match:
        severity: warning
      receiver: "warning"

receivers:
  - name: "default"
    webhook_configs:
      - url: "http://localhost:3000/webhooks/alerts"
        send_resolved: true

  - name: "critical"
    webhook_configs:
      - url: "http://localhost:3000/webhooks/critical"
        send_resolved: true
    # Add email or Slack configuration here
    # email_configs:
    #   - to: 'alerts@example.com'
    #     from: 'alertmanager@example.com'
    #     smarthost: 'smtp.gmail.com:587'
    #     auth_username: 'your-email@gmail.com'
    #     auth_password: 'your-app-password'

  - name: "warning"
    webhook_configs:
      - url: "http://localhost:3000/webhooks/warning"
        send_resolved: true

inhibit_rules:
  - source_match:
      severity: "critical"
    target_match:
      severity: "warning"
    equal: ["alertname", "cluster", "service"]
